<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>–°–¢–û –°–µ—Ä–≤–∏—Å</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<!-- –°–ø–ª–µ—à-—Å–∫—Ä–∏–Ω -->
<div id="splash">
    <img src="images/Splash.jpg" alt="Splash Screen">
</div>

<!-- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π -->
<div id="photoViewer" class="photo-viewer">
    <div class="photo-viewer-content" id="photoViewerContent">
        <button class="close-viewer" id="closeViewer">√ó</button>
        <div class="photo-counter" id="photoCounter">1 / 3</div>
        <div class="photo-slider" id="photoSlider">
            <div class="photo-slide">
                <img class="photo-slide-img" src="images/Photo_1.jpg" alt="–§–æ—Ç–æ —Ä–∞–±–æ—Ç—ã 1">
            </div>
            <div class="photo-slide">
                <img class="photo-slide-img" src="images/Photo_2.jpg" alt="–§–æ—Ç–æ —Ä–∞–±–æ—Ç—ã 2">
            </div>
            <div class="photo-slide">
                <img class="photo-slide-img" src="images/Photo_3.jpg" alt="–§–æ—Ç–æ —Ä–∞–±–æ—Ç—ã 3">
            </div>
        </div>
        <div class="photo-dots" id="photoDots">
            <div class="photo-dot active" data-index="0"></div>
            <div class="photo-dot" data-index="1"></div>
            <div class="photo-dot" data-index="2"></div>
        </div>
    </div>
</div>

<!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
<div id="authScreen" class="screen">
    <div class="auth-container">
        <div class="input-group">
            <div class="input-label">–õ–æ–≥–∏–Ω</div>
            <input type="text" id="loginInput" class="input-field" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω">
        </div>
        <div class="input-group">
            <div class="input-label">–ü–∞—Ä–æ–ª—å</div>
            <input type="password" id="passwordInput" class="input-field" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
        </div>
        <button id="loginBtn" class="auth-btn">–í–æ–π—Ç–∏</button>
    </div>
</div>

<!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Å —Ç–∞–±–±–∞—Ä–æ–º -->
<div id="mainScreen" class="screen">
    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ "–ú–æ–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏" -->
    <div id="carsTab" class="content">
        <h1 class="page-title">–ú–æ–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏</h1>

        <div class="car-card" data-car-id="1">
            <div class="car-header">
                <div class="car-title">Toyota Camry</div>
                <div class="car-plate">A123MP | 18</div>
            </div>
            <div class="car-mileage">–ü—Ä–æ–±–µ–≥: 85 430 –∫–º</div>
        </div>

        <div class="car-card" data-car-id="2">
            <div class="car-header">
                <div class="car-title">Honda Civic</div>
                <div class="car-plate">C404–¢–û | 777</div>
            </div>
            <div class="car-mileage">–ü—Ä–æ–±–µ–≥: 42 150 –∫–º</div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ "–ü—Ä–æ—Ñ–∏–ª—å" -->
    <div id="profileTab" class="content" style="display: none;">
        <h1 class="page-title">–ü—Ä–æ—Ñ–∏–ª—å</h1>

        <div class="profile-section">
            <div class="profile-info">
                <div class="detail-label">–§–ò–û</div>
                <div class="detail-value">–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á</div>
            </div>
            <div class="profile-info">
                <div class="detail-label">–¢–µ–ª–µ—Ñ–æ–Ω</div>
                <div class="detail-value">+7 (999) 123-45-67</div>
            </div>
            <div class="profile-info">
                <div class="detail-label">Email</div>
                <div class="detail-value">ivanov@example.com</div>
            </div>
        </div>

        <button class="action-btn btn-primary" id="writeToManagerBtn">–ù–∞–ø–∏—Å–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É</button>
        <button class="action-btn btn-secondary">–ü–æ–∑–≤–æ–Ω–∏—Ç—å –≤ —Å–µ—Ä–≤–∏—Å</button>
        <button class="action-btn btn-secondary" id="aboutAppBtn">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</button>
        <button id="logoutBtn" class="logout-btn">–í—ã–π—Ç–∏</button>
    </div>

    <!-- –¢–∞–±–±–∞—Ä -->
    <div class="tabbar">
        <div class="tab active" data-tab="cars">
            <div class="tab-icon"></div>
            <div>–ú–æ–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏</div>
        </div>
        <div class="tab" data-tab="profile">
            <div class="tab-icon"></div>
            <div>–ü—Ä–æ—Ñ–∏–ª—å</div>
        </div>
    </div>
</div>

<!-- –≠–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–µ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—è -->
<div id="carDetailScreen" class="screen">
    <div class="content">
        <h1 class="page-title" id="carDetailTitle">Toyota Camry</h1>

        <div class="car-detail-section">
            <div class="detail-row">
                <div class="detail-label">–ú–∞—Ä–∫–∞ –∏ –º–æ–¥–µ–ª—å</div>
                <div class="detail-value">Toyota Camry</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">–ì–æ—Å. –Ω–æ–º–µ—Ä</div>
                <div class="detail-value">A123–ú–† | 18</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">VIN</div>
                <div class="detail-value">JTDKB20U087789123</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">–ü—Ä–æ–±–µ–≥</div>
                <div class="detail-value">85 430 –∫–º</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞</div>
                <div class="detail-value">2018</div>
            </div>
        </div>

        <button id="viewHistoryBtn" class="action-btn btn-primary">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
        <button id="bookOnlineBtn" class="action-btn btn-secondary">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –æ–Ω–ª–∞–π–Ω</button>
    </div>
</div>

<!-- –≠–∫—Ä–∞–Ω –∏—Å—Ç–æ—Ä–∏–∏ –≤–∏–∑–∏—Ç–æ–≤ -->
<div id="historyScreen" class="screen">
    <div class="content">
        <h1 class="page-title">–ò—Å—Ç–æ—Ä–∏—è –≤–∏–∑–∏—Ç–æ–≤</h1>

        <div class="visit-card" data-visit-id="1">
            <div class="visit-date">15 –º–∞—Ä—Ç–∞ 2024</div>
            <div class="visit-services">–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞ –≤ –î–í–°, –∑–∞–º–µ–Ω–∞ –º–∞—Å–ª—è–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞, –∑–∞–º–µ–Ω–∞ –≤–æ–∑–¥—É—à–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞</div>
            <div class="visit-mileage">–ü—Ä–æ–±–µ–≥: 85 430 –∫–º</div>
        </div>

        <div class="visit-card" data-visit-id="2">
            <div class="visit-date">10 —è–Ω–≤–∞—Ä—è 2024</div>
            <div class="visit-services">–ó–∞–º–µ–Ω–∞ –∞–Ω—Ç–∏—Ñ—Ä–∏–∑–∞, –ø—Ä–æ–º—ã–≤–∫–∞ —Ä–∞–¥–∏–∞—Ç–æ—Ä–∞</div>
            <div class="visit-mileage">–ü—Ä–æ–±–µ–≥: 82 150 –∫–º</div>
        </div>
    </div>
</div>

<!-- –≠–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–µ–π –≤–∏–∑–∏—Ç–∞ -->
<div id="visitDetailScreen" class="screen">
    <div class="content">
        <h1 class="page-title">–î–µ—Ç–∞–ª–∏ –≤–∏–∑–∏—Ç–∞</h1>

        <div class="car-detail-section">
            <div class="detail-row">
                <div class="detail-label">–î–∞—Ç–∞</div>
                <div class="detail-value">15 –º–∞—Ä—Ç–∞ 2024</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">–ü—Ä–æ–±–µ–≥</div>
                <div class="detail-value">85 430 –∫–º</div>
            </div>
        </div>

        <h2 style="font-size: 18px; margin: 20px 0 12px 0; color: #1a1a1a;">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</h2>

        <div class="service-item">
            <div class="service-name">–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞ –≤ –î–í–°</div>
        </div>
        <div class="service-item">
            <div class="service-name">–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª—è–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞</div>
        </div>
        <div class="service-item">
            <div class="service-name">–ó–∞–º–µ–Ω–∞ –≤–æ–∑–¥—É—à–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞</div>
        </div>

        <h2 style="font-size: 18px; margin: 20px 0 12px 0; color: #1a1a1a;">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ä–∞–±–æ—Ç</h2>

        <div class="photo-gallery">
            <div class="photo-item" data-photo-index="0" style="background-image: url('images/Photo_1.jpg')"></div>
            <div class="photo-item" data-photo-index="1" style="background-image: url('images/Photo_2.jpg')"></div>
            <div class="photo-item" data-photo-index="2" style="background-image: url('images/Photo_3.jpg')"></div>
        </div>
    </div>
</div>

<!-- –≠–∫—Ä–∞–Ω –∑–∞–ø–∏—Å–∏ –æ–Ω–ª–∞–π–Ω -->
<div id="bookingScreen" class="screen">
    <div class="content">
        <h1 class="page-title">–ó–∞–ø–∏—Å—å –æ–Ω–ª–∞–π–Ω</h1>

        <div class="car-detail-section">
            <div class="detail-row">
                <div class="detail-label">–ê–≤—Ç–æ–º–æ–±–∏–ª—å</div>
                <div class="detail-value" id="bookingCarTitle">Toyota Camry</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">–¢–µ–∫—É—â–∏–π –ø—Ä–æ–±–µ–≥</div>
                <div class="detail-value" id="bookingCarMileage">85 430 –∫–º</div>
            </div>
        </div>

        <div class="input-group">
            <div class="input-label">–ñ–µ–ª–∞–µ–º–∞—è –¥–∞—Ç–∞</div>
            <input type="date" id="bookingDate" class="input-field" min="">
        </div>

        <div class="input-group">
            <div class="input-label">–£–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è</div>
            <select id="bookingTime" class="input-field">
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</option>
                <option value="09:00">09:00</option>
                <option value="10:00">10:00</option>
                <option value="11:00">11:00</option>
                <option value="12:00">12:00</option>
                <option value="13:00">13:00</option>
                <option value="14:00">14:00</option>
                <option value="15:00">15:00</option>
                <option value="16:00">16:00</option>
                <option value="17:00">17:00</option>
            </select>
        </div>

        <div class="input-group">
            <div class="input-label">–¢–∏–ø —É—Å–ª—É–≥–∏</div>
            <select id="serviceType" class="input-field">
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É</option>
                <option value="technical_service">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</option>
                <option value="oil_change">–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞</option>
                <option value="brake_service">–†–µ–º–æ–Ω—Ç —Ç–æ—Ä–º–æ–∑–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã</option>
                <option value="diagnostics">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</option>
                <option value="tire_service">–®–∏–Ω–æ–º–æ–Ω—Ç–∞–∂</option>
                <option value="other">–î—Ä—É–≥–∞—è —É—Å–ª—É–≥–∞</option>
            </select>
        </div>

        <div class="input-group">
            <div class="input-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</div>
            <textarea id="bookingComment" class="input-field" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∏–ª–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è" rows="3" style="height: auto; padding: 12px 16px; resize: none;"></textarea>
        </div>

        <button id="submitBookingBtn" class="action-btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
        <button id="cancelBookingBtn" class="action-btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
    </div>
</div>

<!-- –≠–∫—Ä–∞–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ -->
<div id="bookingConfirmationScreen" class="screen">
    <div class="content" style="text-align: center; padding-top: 100px;">
        <div style="font-size: 64px; margin-bottom: 24px;">‚úÖ</div>
        <h1 class="page-title">–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!</h1>
        <p style="color: #8E8E93; margin-bottom: 32px; line-height: 1.4;">
            –í–∞—à–∞ –∑–∞—è–≤–∫–∞ –Ω–∞ –∑–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞.<br>
            –ù–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
        </p>
        <div class="booking-details" style="background: #F7F7F7; border-radius: 12px; padding: 16px; margin-bottom: 24px; text-align: left;">
            <div class="detail-row">
                <div class="detail-label">–î–∞—Ç–∞</div>
                <div class="detail-value" id="confirmationDate">-</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">–í—Ä–µ–º—è</div>
                <div class="detail-value" id="confirmationTime">-</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">–£—Å–ª—É–≥–∞</div>
                <div class="detail-value" id="confirmationService">-</div>
            </div>
        </div>
        <button id="bookingBackToCarBtn" class="action-btn btn-primary">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∞–≤—Ç–æ–º–æ–±–∏–ª—é</button>
    </div>
</div>

<!-- –≠–∫—Ä–∞–Ω "–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏" -->
<div id="aboutAppScreen" class="screen">
    <div class="content">
        <h1 class="page-title">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h1>

        <div class="features-section">
            <div class="feature-item">
                <div class="feature-icon">üìã</div>
                <div class="feature-content">
                    <div class="feature-title">–ò—Å—Ç–æ—Ä–∏—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –æ–Ω–ª–∞–π–Ω</div>
                    <div class="feature-description">–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∫–æ–≥–¥–∞ –º–µ–Ω—è–ª–∏, —á—Ç–æ –º–µ–Ω—è–ª–∏ –∏ –Ω–∞ –∫–∞–∫–æ–º –ø—Ä–æ–±–µ–≥–µ</div>
                </div>
            </div>

            <div class="feature-item">
                <div class="feature-icon">üîî</div>
                <div class="feature-content">
                    <div class="feature-title">Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
                    <div class="feature-description">–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ—Å–µ—Ç–∏—Ç—å –°–¢–û –ø–æ –ø—Ä–æ–±–µ–≥—É –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–∏</div>
                </div>
            </div>

            <div class="feature-item">
                <div class="feature-icon">üì∏</div>
                <div class="feature-content">
                    <div class="feature-title">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ä–∞–±–æ—Ç</div>
                    <div class="feature-description">–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ —Ñ–æ—Ç–æ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç –æ—Ç –°–¢–û</div>
                </div>
            </div>

            <div class="feature-item">
                <div class="feature-icon">üìÖ</div>
                <div class="feature-content">
                    <div class="feature-title">–û–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å—å –Ω–∞ –°–¢–û</div>
                    <div class="feature-description">–£–¥–æ–±–Ω–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –≤ –ø–∞—Ä–µ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏</div>
                </div>
            </div>

            <div class="feature-item">
                <div class="feature-icon">üí≥</div>
                <div class="feature-content">
                    <div class="feature-title">–û–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç–∞ —É—Å–ª—É–≥</div>
                    <div class="feature-description">–û–ø–ª–∞—á–∏–≤–∞–π—Ç–µ —É—Å–ª—É–≥–∏ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç–æ–π –∏–ª–∏ —á–µ—Ä–µ–∑ –°–ë–ü</div>
                </div>
            </div>
        </div>

        <div class="app-info" style="margin-top: 32px; padding: 16px; background: #F7F7F7; border-radius: 12px;">
            <div class="detail-row">
                <div class="detail-label">–í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</div>
                <div class="detail-value">1.0.0</div>
            </div>
            <div class="detail-row">
                <div class="detail-label">–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫</div>
                <div class="detail-value">–û–û–û "–ê—Å—Ç–µ–æ—Å"</div>
            </div>
        </div>
    </div>
</div>

<script>
    const tg = window.Telegram.WebApp;

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebApp
    tg.ready();
    tg.expand();
    tg.enableClosingConfirmation();
    tg.BackButton.hide();

    // –¢–µ–∫—É—â–∏–π —ç–∫—Ä–∞–Ω
    let currentScreen = 'auth';

    // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
    let currentPhotoIndex = 0;
    const totalPhotos = 3;
    let startX = 0;
    let currentX = 0;
    let isSwiping = false;

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —á–∞—Ç–∞ —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
    function openManagerChat() {
        const managerUsername = 'MobileApps18';

        try {
            // –ü—ã—Ç–∞–µ–º—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Telegram WebApp API
            if (tg && typeof tg.openTelegramLink === 'function') {
                tg.openTelegramLink(`https://t.me/${managerUsername}`);
            } else if (tg && typeof tg.openLink === 'function') {
                // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤–µ—Ä—Å–∏–π WebApp
                tg.openLink(`https://t.me/${managerUsername}`);
            } else {
                // Fallback –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
                window.open(`https://t.me/${managerUsername}`, '_blank');
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —á–∞—Ç–∞:', error);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
            tg.showPopup({
                title: '–û—à–∏–±–∫–∞',
                message: '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å —á–∞—Ç. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É –Ω–∞–ø—Ä—è–º—É—é: @MobileApps18',
                buttons: [{ type: 'ok' }]
            });
        }
    }

    // –§—É–Ω–∫—Ü–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
    function showScreen(screenName) {
        console.log('–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω:', screenName);

        // –°–∫—Ä—ã—Ç—å –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
        document.querySelectorAll('.screen').forEach(screen => {
            screen.classList.remove('active');
        });

        // –ü–æ–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω—ã–π —ç–∫—Ä–∞–Ω
        const targetScreen = document.getElementById(screenName + 'Screen');
        if (targetScreen) {
            targetScreen.classList.add('active');
        } else {
            console.error('–≠–∫—Ä–∞–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω:', screenName);
        }

        currentScreen = screenName;
        updateBackButton();
    }

    function updateBackButton() {
        // –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥" –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä—ë—Ä–∞
        if (document.getElementById('photoViewer').classList.contains('active')) {
            tg.BackButton.show();
            tg.BackButton.offClick(goBack);
            tg.BackButton.onClick(closePhotoViewer);
        } else {
            // –û–±—ã—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —ç–∫—Ä–∞–Ω–æ–≤
            switch(currentScreen) {
                case 'auth':
                case 'main':
                case 'bookingConfirmation':
                    tg.BackButton.hide();
                    break;
                case 'carDetail':
                case 'history':
                case 'visitDetail':
                case 'booking':
                case 'aboutApp':
                    tg.BackButton.show();
                    tg.BackButton.offClick(goBack);
                    tg.BackButton.onClick(goBack);
                    break;
            }
        }
    }

    function goBack() {
        switch(currentScreen) {
            case 'carDetail':
                showScreen('main');
                break;
            case 'history':
                showScreen('carDetail');
                break;
            case 'visitDetail':
                showScreen('history');
                break;
            case 'booking':
                showScreen('carDetail');
                break;
            case 'bookingConfirmation':
                showScreen('carDetail');
                break;
            case 'aboutApp':
                showScreen('main');
                break;
        }
    }

    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
    function openPhotoViewer(startIndex = 0) {
        currentPhotoIndex = startIndex;
        updatePhotoViewer();
        document.getElementById('photoViewer').classList.add('active');
        updateBackButton(); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
    }

    function closePhotoViewer() {
        document.getElementById('photoViewer').classList.remove('active');
        updateBackButton(); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ã—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
    }

    function updatePhotoViewer() {
        const photoSlider = document.getElementById('photoSlider');
        const photoCounter = document.getElementById('photoCounter');
        const photoDots = document.querySelectorAll('.photo-dot');

        // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é —Å–ª–∞–π–¥–µ—Ä–∞
        photoSlider.style.transform = `translateX(-${currentPhotoIndex * 100}%)`;

        photoCounter.textContent = `${currentPhotoIndex + 1} / ${totalPhotos}`;

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ—á–∫–∏
        photoDots.forEach((dot, index) => {
            dot.classList.toggle('active', index === currentPhotoIndex);
        });
    }

    function showPhoto(index) {
        if (index >= 0 && index < totalPhotos) {
            currentPhotoIndex = index;
            updatePhotoViewer();
        }
    }

    function showNextPhoto() {
        if (currentPhotoIndex < totalPhotos - 1) {
            currentPhotoIndex++;
            updatePhotoViewer();
        }
    }

    function showPrevPhoto() {
        if (currentPhotoIndex > 0) {
            currentPhotoIndex--;
            updatePhotoViewer();
        }
    }

    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–≤–∞–π–ø–∞
    function handleTouchStart(e) {
        startX = e.touches[0].clientX;
        currentX = startX;
        isSwiping = true;
    }

    function handleTouchMove(e) {
        if (!isSwiping) return;
        currentX = e.touches[0].clientX;
        const diff = currentX - startX;

        // –ë–ª–æ–∫–∏—Ä—É–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª –≤–æ –≤—Ä–µ–º—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Å–≤–∞–π–ø–∞
        if (Math.abs(diff) > 10) {
            e.preventDefault();
        }
    }

    function handleTouchEnd(e) {
        if (!isSwiping) return;

        const diff = currentX - startX;
        const threshold = 50; // –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ —Å–≤–∞–π–ø–∞

        if (Math.abs(diff) > threshold) {
            if (diff > 0) {
                // –°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ - –ø—Ä–µ–¥—ã–¥—É—â–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è
                showPrevPhoto();
            } else {
                // –°–≤–∞–π–ø –≤–ª–µ–≤–æ - —Å–ª–µ–¥—É—é—â–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è
                showNextPhoto();
            }
        }

        isSwiping = false;
    }

    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏ –æ–Ω–ª–∞–π–Ω
    function setupBookingScreen(carData) {
        document.getElementById('bookingCarTitle').textContent = carData.title;
        document.getElementById('bookingCarMileage').textContent = carData.mileage;

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É - —Å–µ–≥–æ–¥–Ω—è
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('bookingDate').min = today;

        // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
        document.getElementById('bookingDate').value = '';
        document.getElementById('bookingTime').value = '';
        document.getElementById('serviceType').value = '';
        document.getElementById('bookingComment').value = '';
    }

    function submitBooking() {
        const date = document.getElementById('bookingDate').value;
        const time = document.getElementById('bookingTime').value;
        const service = document.getElementById('serviceType').value;
        const comment = document.getElementById('bookingComment').value;

        // –í–∞–ª–∏–¥–∞—Ü–∏—è
        if (!date || !time || !service) {
            tg.showPopup({
                title: '–û—à–∏–±–∫–∞',
                message: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è',
                buttons: [{ type: 'ok' }]
            });
            return;
        }

        // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        const dateObj = new Date(date);
        const formattedDate = dateObj.toLocaleDateString('ru-RU', {
            day: 'numeric',
            month: 'long',
            year: 'numeric'
        });

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
        document.getElementById('confirmationDate').textContent = formattedDate;
        document.getElementById('confirmationTime').textContent = time;

        const serviceText = document.getElementById('serviceType').options[document.getElementById('serviceType').selectedIndex].text;
        document.getElementById('confirmationService').textContent = serviceText;

        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        console.log('–î–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏:', {
            date,
            time,
            service,
            comment,
            car: document.getElementById('bookingCarTitle').textContent
        });

        showScreen('bookingConfirmation');
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener('DOMContentLoaded', () => {
        // –°–ø–ª–µ—à-—Å–∫—Ä–∏–Ω
        setTimeout(() => {
            document.getElementById('splash').classList.add('hidden');
            showScreen('auth');
        }, 1500);

        // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
        document.getElementById('loginBtn').addEventListener('click', () => {
            const login = document.getElementById('loginInput').value;
            const password = document.getElementById('passwordInput').value;

            // –õ—é–±–æ–π –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞
            if (login && password) {
                showScreen('main');
            } else {
                // –ü—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—è –ø—É—Å—Ç—ã–µ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
                showScreen('main');
            }
        });

        // –¢–∞–±–±–∞—Ä
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.getAttribute('data-tab');

                // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
                document.getElementById('carsTab').style.display = 'none';
                document.getElementById('profileTab').style.display = 'none';
                document.getElementById(tabName + 'Tab').style.display = 'block';
            });
        });

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º
        document.querySelectorAll('.car-card').forEach(card => {
            card.addEventListener('click', () => {
                const carId = card.getAttribute('data-car-id');
                console.log('–ö–ª–∏–∫ –ø–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—é:', carId);
                showScreen('carDetail');
            });
        });

        // –ö–Ω–æ–ø–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
        document.getElementById('viewHistoryBtn').addEventListener('click', () => {
            showScreen('history');
        });

        document.getElementById('bookOnlineBtn').addEventListener('click', () => {
            const carData = {
                title: document.getElementById('carDetailTitle').textContent,
                mileage: document.querySelector('.car-detail-section .detail-row:nth-child(4) .detail-value').textContent
            };
            setupBookingScreen(carData);
            showScreen('booking');
        });

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∏—Å—Ç–æ—Ä–∏–∏
        document.querySelectorAll('.visit-card').forEach(card => {
            card.addEventListener('click', () => {
                const visitId = card.getAttribute('data-visit-id');
                console.log('–ö–ª–∏–∫ –ø–æ –≤–∏–∑–∏—Ç—É:', visitId);
                showScreen('visitDetail');
            });
        });

        // –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
        document.querySelectorAll('.photo-item').forEach(photo => {
            photo.addEventListener('click', () => {
                const photoIndex = parseInt(photo.getAttribute('data-photo-index'));
                openPhotoViewer(photoIndex);
            });
        });

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
        document.getElementById('closeViewer').addEventListener('click', closePhotoViewer);

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º —á–µ—Ä–µ–∑ —Ç–æ—á–∫–∏
        document.querySelectorAll('.photo-dot').forEach(dot => {
            dot.addEventListener('click', () => {
                const index = parseInt(dot.getAttribute('data-index'));
                showPhoto(index);
            });
        });

        // –°–≤–∞–π–ø –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
        const photoViewerContent = document.getElementById('photoViewerContent');
        photoViewerContent.addEventListener('touchstart', handleTouchStart, { passive: true });
        photoViewerContent.addEventListener('touchmove', handleTouchMove, { passive: false });
        photoViewerContent.addEventListener('touchend', handleTouchEnd, { passive: true });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Ñ–æ–Ω
        document.getElementById('photoViewer').addEventListener('click', (e) => {
            if (e.target === document.getElementById('photoViewer')) {
                closePhotoViewer();
            }
        });

        // –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
        document.getElementById('logoutBtn').addEventListener('click', () => {
            showScreen('auth');
            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è –≤–≤–æ–¥–∞
            document.getElementById('loginInput').value = '';
            document.getElementById('passwordInput').value = '';
        });

        // –ö–Ω–æ–ø–∫–∞ "–ù–∞–ø–∏—Å–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É"
        document.getElementById('writeToManagerBtn').addEventListener('click', openManagerChat);

        // –ö–Ω–æ–ø–∫–∞ "–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"
        document.getElementById('aboutAppBtn').addEventListener('click', () => {
            showScreen('aboutApp');
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —ç–∫—Ä–∞–Ω–∞ –∑–∞–ø–∏—Å–∏
        document.getElementById('submitBookingBtn').addEventListener('click', submitBooking);

        document.getElementById('cancelBookingBtn').addEventListener('click', () => {
            showScreen('carDetail');
        });

        document.getElementById('bookingBackToCarBtn').addEventListener('click', () => {
            showScreen('carDetail');
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∞–≤–∏—à–∏ Escape –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && document.getElementById('photoViewer').classList.contains('active')) {
                closePhotoViewer();
            }
        });

        // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–≤–∞–π–ø–∞ –≤–Ω–∏–∑
        document.body.addEventListener('touchmove', (e) => {
            if (e.target === document.body) {
                e.preventDefault();
            }
        }, { passive: false });

        // Enter –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        document.getElementById('passwordInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('loginBtn').click();
            }
        });

        // Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –∑–∞–ø–∏—Å–∏
        document.getElementById('bookingComment').addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && e.ctrlKey) {
                submitBooking();
            }
        });
    });
</script>
</body>
</html>
